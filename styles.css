/*!
 * Cascading Style Sheet (CSS) for a simple website
 *
 * Copyright (c) 2024-2025 David Uhden Collado <david@uhden.dev>
 *
 * Permission to use, copy, modify, and distribute this cascading style sheet
 * for any purpose with or without fee is hereby granted, provided that the
 * above copyright notice and this permission notice appear in all copies.
 *
 * THE CASCADING STYLE SHEET IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
 * WARRANTIES WITH REGARD TO THIS CASCADING STYLE SHEET INCLUDING ALL IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE
 * LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY
 * DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN
 * AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS CASCADING STYLE SHEET.
 */

/*
 * Design tokens (shared structure)
 * Each site defines its palette in :root below; the rest of the
 * stylesheet intentionally re-uses these tokens so both sites share
 * identical layout and component rules while keeping colors local.
 */
:root {
  /* Light site palette (local to daviduhden-website) */
  color-scheme: light;

  --bg: #f7f9fb;
  --panel: #ffffff;
  --panel-2: #fbfdff;

  --text: #1f2937;
  --muted: #4b5563;
  --heading: #0f172a;
  --link: #0ea5e9;
  --link-hover: #0891b2;

  --border: #e5e7eb;
  --border-hover: #d1d5db;

  --nav-bg: transparent;
  --nav-bg-hover: #f3f4f6;

  --radius: 0.75em;
  --radius-soft: 0.66em;
  --radius-pill: 999em;

  --shadow: 0 0.5em 1.5em rgba(15, 23, 42, 0.05);
  --shadow-img: 0 0.125em 0.75em rgba(0, 0, 0, 0.07);

  --max-width: 72ch;
  --gutter: 1.25em;

  /* page padding (matches cypherpunk site) */
  --pad-y: 2em;
  --pad-x: 1.25em;

  --focus-ring: 0 0 0 0.2em rgba(14, 165, 233, 0.35);
}

/*
 * Global box sizing
 * Reduces layout surprises when padding/borders are applied.
 */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/*
 * Root document adjustments
 * Helps keep text sizing consistent across platforms.
 */
html {
  text-size-adjust: 100%;
}

/*
 * General styles for the body of the document
 * Sets background, font, and text color for the whole site.
 */
body {
  margin: 0;
  padding: var(--pad-y) var(--pad-x);
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
  line-height: 1.6;
}

/* Allow very long words to break and wrap to the next line to avoid overflow */
html, body, p, li, h1, h2, h3, h4, h5, h6 {
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}

/* Protect code and pre from forced breaks */
code, pre, kbd, samp {
  overflow-wrap: normal;
  word-break: normal;
  hyphens: none;
}

pre {
  white-space: pre;
  overflow-x: auto;
}

code {
  white-space: pre-wrap;
}

/*
 * Layout containers for header, main, and footer
 * Centers content and sets a max width.
 */
header,
main,
footer {
  width: min(var(--max-width), 100% - var(--gutter) * 2);
  margin: 0 auto;
}

/*
 * Header styling
 * Adds padding and centers the header text.
 */
header {
  padding: 2em 0 1.25em;
  text-align: center;
}

header h1 {
  margin: 0 0 0.75em;
  font-size: clamp(1.6em, 2.5vw + 1em, 2.25em);
  line-height: 1.2;
  color: var(--heading);
}

header h2 {
  margin: 0 0 1em;
  font-size: clamp(1.05em, 1.1vw + 0.85em, 1.35em);
  font-weight: 600;
  color: var(--muted);
  letter-spacing: 0.01em;
}

/*
 * Navigation link styles
 * Styles the main navigation links.
 */
nav * {
  vertical-align: middle;
}

nav ul {
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75em;
  padding: 0;
  margin: 0 0 1.5em;
  justify-content: center;
}

nav a {
  display: inline-block;
  padding: 0.45em 0.75em;
  margin: 0 0.35em;
  border: thin solid var(--border);
  border-radius: var(--radius-pill);
  background: var(--nav-bg, transparent);
  color: var(--heading);
  text-decoration: none;
  font-weight: 600;
}

nav a:hover {
  background: var(--nav-bg-hover, #f3f4f6);
  border-color: var(--border-hover);
}

/*
 * Focus styles (accessibility)
 * Makes keyboard navigation clearly visible without changing layout.
 */
a:focus-visible,
button:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
  border-radius: 0.4em;
}

/*
 * Language switch button styles
 * Adds border, padding, and icon alignment for language switcher.
 */
.lang-switch {
  display: inline-flex;
  align-items: center;
  gap: 0.2em;
  padding: 0.25em 0.5em;
  margin-left: 0.35em;
  border: thin solid var(--border);
  border-radius: var(--radius-pill);
  background: var(--nav-bg, transparent);
  color: var(--heading);
  text-decoration: none;
  font-weight: 600;
  line-height: 1;
  font-size: inherit;
  height: auto;
}

.lang-switch:hover {
  background: var(--nav-bg-hover, #f3f4f6);
  border-color: var(--border-hover);
}

/*
 * Icon style for inline SVG or img icons
 */
.icon {
  display: inline-block;
  inline-size: 1.25em;
  block-size: 1.25em;
  vertical-align: middle;
  margin-left: 0.25em;
  margin-right: 0.25em;
  border-radius: 0;
  border: none;
  background: transparent;
}

.lang-switch .icon {
  inline-size: 1em;
  block-size: 1em;
  margin-left: 0.2em;
  margin-right: 0.2em;
  vertical-align: middle;
}

/*
 * Main content styling
 * Creates a readable panel with subtle border and shadow.
 */
main {
  background: var(--panel);
  border: thin solid var(--border);
  border-radius: var(--radius);
  padding: 1.75em;
  box-shadow: var(--shadow);
}

/*
 * Article header spacing
 */
article header {
  margin-bottom: 1.25em;
}

.kicker {
  margin: 0 0 0.35em;
  color: var(--heading);
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  font-size: 0.85em;
}

.meta {
  margin: 0 0 0.6em;
  color: var(--muted);
  font-size: 0.95em;
}

.lede {
  margin: 0.2em 0 1em;
  color: var(--heading);
  font-size: 1.05em;
  line-height: 1.7;
}

section {
  margin-bottom: 1.5em;
}

section h2 {
  margin: 0 0 0.5em;
  font-size: clamp(1.25em, 1.2vw + 1em, 1.6em);
  color: var(--heading);
  line-height: 1.25;
}

pre {
  background: var(--panel-2);
  border: thin solid var(--border);
  border-radius: calc(var(--radius-soft, 0.66em) * 0.9);
  padding: 1em;
  overflow-x: auto;
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
  margin: 1em 0;
}

code {
  white-space: pre-wrap;
  padding: 0.2em 0.35em;
  border-radius: 0.35em;
  background: var(--nav-bg, transparent);
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
}

/* List indentation: make lists visually indented from normal paragraph text */
ul, ol {
  padding-left: 1.8em;
  margin: 0.35em 0 0.85em;
}

/* Nested lists should be slightly more indented */
ul ul, ol ol, ul ol, ol ul {
  padding-left: 1.4em;
}

a {
  color: var(--link);
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/*
 * Responsive image styles for articles
 * Ensures images scale well and look good at different sizes.
 */
.article-content img {
  display: block;
  max-width: 100%;
  height: auto;
  margin: 1.5em auto;
  border-radius: calc(var(--radius) * 0.66);
  box-shadow: var(--shadow-img);
}

/* Small images (e.g., icons, inline)
   Add .img-small class to images in articles for small presentation
   Uses character measures + viewport rather than fixed pixel equivalents. */
.article-content img.img-small {
  max-width: clamp(16ch, 30vw, 28ch);
  margin: 1em auto;
  box-shadow: none;
}

/* Medium images (e.g., half-width)
   Add .img-medium class to images in articles for medium presentation
   Uses character measures + viewport rather than fixed pixel equivalents. */
.article-content img.img-medium {
  max-width: clamp(32ch, 70vw, 56ch);
}

/* Large images (e.g., full-width banners)
   Add .img-large class to images in articles for large presentation */
.article-content img.img-large {
  max-width: 100%;
  width: 100%;
  margin-left: 0;
  margin-right: 0;
}

/*
 * Generic image styling (outside article content)
 * Match cypherpunk-handbook visual treatment for images.
 */
img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 1em auto;
  border-radius: calc(var(--radius) * 1.1);
  border: thin solid var(--border);
  box-shadow: var(--shadow-img);
}

/*
 * Optional: avoid overflow in code blocks if you have them
 */
pre,
code {
  max-width: 100%;
}

/* Quotation styles */
blockquote {
  margin: 0 0 1em;
  padding: 0.8em 1em;
  background: var(--panel-2);
  border-left: 4px solid var(--border);
  border-radius: calc(var(--radius) * 0.35);
  color: var(--muted);
  font-style: italic;
}

blockquote p {
  margin: 0;
}

blockquote cite {
  display: block;
  margin-top: 0.5em;
  font-size: 0.95em;
  color: var(--muted);
  font-style: normal;
  text-align: right;
}

/*
 * Footer styling
 * Center footer content, except footnote paragraphs.
 */
footer {
  padding: 1.25em 0 2em;
  text-align: center;
  color: var(--muted);
  font-size: 0.95em;
}

footer p {
  margin: 0.35em 0;
  text-align: center;
}

/* Keep footnote paragraphs left-aligned (those that contain <sup>) */
footer p:has(sup) {
  text-align: justify;
}

footer p sup {
  display: inline-block;
  min-width: 1.4em;
  margin-right: 0.4em;
  padding: 0.05em 0.4em;
  border-radius: var(--radius-pill);
  background: #e0f2fe;
  color: var(--heading);
  font-weight: 700;
  font-size: 0.8em;
  text-align: center;
}

/* Footer motto: keep icon tight with heading text */
footer h4,
footer .motto {
  display: inline-flex;
  align-items: center;
  gap: 0.4em;
  margin: 0.35em 0;
}

/*
 * Motion preferences
 * Disables transitions/animations for users who prefer reduced motion.
 */
@media (prefers-reduced-motion: reduce) {
  * {
    scroll-behavior: auto !important;
    transition: none !important;
    animation: none !important;
  }
}
